<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Home</title>
    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.iframe-transport.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.fileupload.js"></script>
    <link rel="stylesheet" type="text/css" href="../../static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="all" href="../../static/css/base.css" >
    <link rel="stylesheet" type="text/css" media="all" href="../../static/css/index.css" >
</head>
<body>

<div class="page-header">
    <h1>Welcome to SwayMini!
        <small>{{ username }}</small>
    </h1>
</div>

<div class="container" align="center">
    <a href="../signout/" role="button" class="btn btn-danger">登出</a>
    <a href="#fnameModal" data-toggle="modal" role="button" class="btn btn-success">创建新文档！</a>
    <a href="../res_lib/" role="button" class="btn btn-info">我的媒体库</a>
    <br/><br/>
    {% for record in doc_lst %}
        <div class="list-group">
            <a href="#" class="list-group-item"
               style="padding-top: 1px; padding-bottom: 1px;
                        padding-left: 1px; padding-right: 1px;">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        文档名称
                    </div>
                    <div class="panel-body">
                        {{ record.doc_name }}
                    </div>
                </div>
            </a>
            <a href="../edit/{{ record.doc_id }}/" class="list-group-item">
               编辑文档
            </a>
            {% if record.isPublic %}
                <a href="../show/{{ record.doc_id }}/" class="list-group-item">
                    已发布
                </a>
            {% else %}
                <a class="list-group-item disabled">
                    未发布
                </a>
            {% endif %}
        </div>
    {% endfor %}
    <br/>
</div>

<!-- modal for text insertion -->
<div style="display: none;" class="modal fade" id="fnameModal" tabindex="-1" role="dialog" aria-labelledby="fnameModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> × </button>
                <h4 class="modal-title" id="fnameModalLabel"> Doc Name </h4>
            </div>
            <div class="modal-body">
                <form role="form" action="../new_doc/" method="post" id="fnameForm">
                    <div class="form-group">
                        <label for="fname">请输入要创建的文档名称</label>
                        <input class="form-control" name="fname" type="text">
                        <button type="submit" class="hidden"></button>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="createDoc()">
                    Okay
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.insTextModal -->
</body>
</html>

<script>
    function createDoc() {
        //window.location.href='../new_doc/';
        $("#fnameForm").submit();
    }

</script>